{"ast":null,"code":"var _jsxFileName = \"/Users/hutchski/GA-SEI/unit_4/week_12/Striva/client/src/containers/YouContainer.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { Route, Switch, useHistory } from 'react-router-dom';\nimport { getAllPosts, destroyPost, putPost, postPost } from '../services/posts';\nimport YourPosts from '../screens/YourPosts';\nimport CreatePost from '../screens/CreatePost';\nimport EditPost from '../screens/EditPost';\nimport PostDetail from '../screens/PostDetail';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function YouContainer(props) {\n  _s();\n\n  const [allPosts, setAllPosts] = useState([]);\n  const history = useHistory();\n  const {\n    currentUser\n  } = props; // useEffect(() => {\n  //   fetchYourPosts();\n  // }, [])\n  // const fetchYourPosts = async () => {\n  //   const posts = await getUsersPosts();\n  //   setAllPosts(posts);\n  // }\n\n  useEffect(() => {\n    const fetchPosts = async () => {\n      const postData = await getAllPosts();\n      setAllPosts(postData);\n    };\n\n    fetchPosts();\n  }, []);\n\n  const createPost = async postData => {\n    const newPost = await postPost(postData);\n    setAllPosts(prevState => [...prevState, newPost]);\n    history.push('/posts');\n  };\n\n  const updatePost = async (id, postData) => {\n    const updatedPost = await putPost(id, postData);\n    setAllPosts(prevState => prevState.map(post => {\n      return post.id === Number(id) ? updatedPost : post;\n    }));\n    history.push('/posts');\n  };\n\n  const removePost = async id => {\n    await destroyPost(id);\n    setAllPosts(prevState => prevState.filter(post => post.id !== id));\n    history.push('/posts');\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Switch, {\n      children: [/*#__PURE__*/_jsxDEV(Route, {\n        path: \"/posts/new\",\n        children: /*#__PURE__*/_jsxDEV(CreatePost, {\n          createPost: createPost\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/posts/:id/edit\",\n        children: /*#__PURE__*/_jsxDEV(EditPost, {\n          updatePost: updatePost,\n          allPosts: allPosts\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/posts/:id\",\n        children: /*#__PURE__*/_jsxDEV(PostDetail, {\n          allPosts: allPosts,\n          removePost: removePost\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/myposts\",\n        children: /*#__PURE__*/_jsxDEV(YourPosts, {\n          posts: allPosts,\n          currentUser: currentUser\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n\n_s(YouContainer, \"7nuxlWAdXESVv9CtOP4yDOPQ94U=\", false, function () {\n  return [useHistory];\n});\n\n_c = YouContainer;\n\nvar _c;\n\n$RefreshReg$(_c, \"YouContainer\");","map":{"version":3,"sources":["/Users/hutchski/GA-SEI/unit_4/week_12/Striva/client/src/containers/YouContainer.jsx"],"names":["React","useState","useEffect","Route","Switch","useHistory","getAllPosts","destroyPost","putPost","postPost","YourPosts","CreatePost","EditPost","PostDetail","YouContainer","props","allPosts","setAllPosts","history","currentUser","fetchPosts","postData","createPost","newPost","prevState","push","updatePost","id","updatedPost","map","post","Number","removePost","filter"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Route, Switch, useHistory } from 'react-router-dom';\nimport { getAllPosts, destroyPost, putPost, postPost } from '../services/posts';\n\nimport YourPosts from '../screens/YourPosts'\nimport CreatePost from '../screens/CreatePost'\nimport EditPost from '../screens/EditPost'\nimport PostDetail from '../screens/PostDetail'\n\n\nexport default function YouContainer(props) {\n  const [allPosts, setAllPosts] = useState([]);\n  const history = useHistory();\n  const {currentUser} = props\n\n  // useEffect(() => {\n  //   fetchYourPosts();\n  // }, [])\n\n  // const fetchYourPosts = async () => {\n  //   const posts = await getUsersPosts();\n  //   setAllPosts(posts);\n  // }\n  useEffect(() => {\n    const fetchPosts = async () => {\n      const postData = await getAllPosts();\n      setAllPosts(postData);\n    }\n    fetchPosts();\n  }, [])\n\n  const createPost = async (postData) => {\n    const newPost = await postPost(postData);\n    setAllPosts(prevState => ([\n      ...prevState,\n      newPost\n    ]));\n    history.push('/posts');\n  }\n  \n  const updatePost = async (id, postData) => {\n    const updatedPost = await putPost(id, postData);\n    setAllPosts(prevState => prevState.map(post => {\n        return post.id === Number(id) ? updatedPost : post\n      })\n    )\n    history.push('/posts');\n  }\n\n  const removePost = async (id) => {\n    await destroyPost(id);\n    setAllPosts(prevState => prevState.filter(post => post.id !== id));\n    history.push('/posts');\n  }\n\n\n  return (\n    <>\n      <Switch>\n        <Route path='/posts/new'>\n          <CreatePost\n            createPost={createPost}\n          />\n        </Route>\n        <Route path='/posts/:id/edit'>\n          <EditPost\n            updatePost={updatePost}\n            allPosts={allPosts}\n          />\n        </Route>\n        <Route path='/posts/:id'>\n          <PostDetail\n            allPosts={allPosts}\n            removePost={removePost}\n          />\n        </Route>\n        <Route path='/myposts'>\n          <YourPosts\n            posts={allPosts}\n            currentUser={currentUser}\n          />\n        </Route>\n      </Switch>\n    </>\n  )\n}"]},"metadata":{},"sourceType":"module"}